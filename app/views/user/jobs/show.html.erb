<div class="container">
  <header class="row">
    <div class="col s12 m12 l12 left-align">
      <%= link_to "Â« Back to Carpentry", category_path("carpentry"), class: "back-to-category-link" %>
    </div>
  </header>
  <section class="row flex-s">
    <div class="col s12 m12 l4 box-a">
      <div class="row">
        <div id="google-map" class="google-map-job"></div>
      </div>
      <div class="row">
        <h5>Denver, CO</h5>
      </div>
    </div>
    <div class="col s12 m12 l8 box-b main-job-information">
      <div class="row valign-wrapper no-bottom-margin">
        <h5 class="col s12 m10 l10 left-align job-title">
          Build A Dining Room Table
        </h5>
        <div class="col s12 m2 l2 center-align valign">
          <div class="duration-tag duration-estimate-medium">Medium</div>
        </div>
      </div>
        <p class="row left-align">
          Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum"
        </p>
        <div class="row center-align no-bottom-margin">
          <div class="col s6 job-info">
            5 bids
          </div>
          <div class="col s6 job-info">
            Must Be Completed By: March 20, 2016
          </div>
        </div>
        <hr>
        <div class="row center-align">
          <div class="col s6 job-info">
            Bid Range: $500 - $700
          </div>
          <div class="col s6 job-info">
            Bidding Ends: March 8, 2016 5:00pm
          </div>
        </div>
    </div>
  </section>
  <div class="row left-align">
   <div class="col s12 m12 l12">
     <div id="accordion">
      <h3>Place A Bid</h3>
      <div>
        <!-- INSIDE THE ACCORDION -->
        <div class="row no-bottom-margin bid-accordion">
           <%= form_for(:bid, url: bids_path) do |f| %>
            <div class="row valign-wrapper">
              <div class="col s12 m4 valign">
                <%= f.label "Joseph Perry", class: "bidder-name" %>
              </div>
              <div class="col s4 m3 bid-input-field valign">
                <%= f.number_field :price, placeholder: :price %>
              </div>
              <div class="col s4 m3 bid-input-field valign">
                <%= f.number_field :duration_estimate, placeholder: "Duration Estimate" %>
              </div>
              <div class="col s4 m2 bid-input-field valign">
                <%= select_tag :time_interval, options_for_select(%w(days hours weeks)), class: "time-interval-select" %>
              </div>
            </div>
            <div class="row no-bottom-margin center-align valign-wrapper">
              <div class="col s8 valign">
                <%= f.text_area :comment, placeholder: "Leave a comment for the job lister",
                                          class: "bid-comment" %>
              </div>
              <div class="col s4 valign">
                <%= f.submit "Submit Bid", class: "btn submit-bid-btn" %>
              </div>
            </div>
           <% end %>
         </div>
        <!-- INSIDE THE ACCORDION -->
      </div>
    </div>
   </div>
 </div>
  <section class="row">
    <h4 class="bids-table-title">Current Bids</h4>
    <table class="striped">
      <thead>
        <tr>
          <th>Bidder Name</th>
          <th>Price</th>
          <th>Duration Estimate</th>
          <th>Comment</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Toni Rib</td>
          <td>$500</td>
          <td>2 weeks</td>
          <td>I can totally build this table because I am super awesome!</td>
          <td>
            <a href="#" class="action-link">Edit</a> |
            <a href="#" class="action-link">Delete</a>
          </td>
        </tr>
        <tr>
          <td>Aaron Greenspan</td>
          <td>$700</td>
          <td>1 week</td>
          <td>I am an expert craftsman and I will build you a beautiul oak table in no time at all.</td>
          <td><a href=# class="action-link">Accept</a></td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="row left-align job-lister-details card">
    <div class="col s2">
      <%= image_tag "http://placehold.it/100x100", class: "circle" %>
    </div>
    <div class="col s10">
      <div class="row">
        <div class="col s12">
          <h5><%= link_to "Dan Winter", root_path,
                  class: "job-lister-name-link" %>
              <span class="lister-rating">(5 / 5)</span>
          </h5>
        </div>
      </div>
      <div class="row lister-info">
        <div class="col s3">
          6 Active Jobs
        </div>
        <div class="col s3">
          3 Completed Jobs
        </div>
        <div class="col s6">
          Active Since June 2013
        </div>
      </div>
    </div>
  </section>
</div>

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<script type="text/javascript">
  $( "#accordion" ).accordion({
    animate: 200,
    active: false,
    collapsible: true,
    heightStyle: "content",
    autoHeight: false
  });
</script>

<%= javascript_tag do %>
  var map;
  function initMap() {
    map = new google.maps.Map(document.getElementById('google-map'), {
      zoom: 13
    });

    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': '80210' }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    })
  }
<% end %>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDm1nN_vOXj6XM6U8rRNaBDAcprgDB1pkM&callback=initMap"
async defer></script>
